<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-components/checkpoint_smart_contract/design">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Design | XDC Subnet</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://XinFinOrg.github.io/xdc-subnet-docs/develop/components/checkpoint_smart_contract/design"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Design | XDC Subnet"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/xdc-subnet-docs/develop/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://XinFinOrg.github.io/xdc-subnet-docs/develop/components/checkpoint_smart_contract/design"><link data-rh="true" rel="alternate" href="https://XinFinOrg.github.io/xdc-subnet-docs/develop/components/checkpoint_smart_contract/design" hreflang="en"><link data-rh="true" rel="alternate" href="https://XinFinOrg.github.io/xdc-subnet-docs/develop/components/checkpoint_smart_contract/design" hreflang="x-default"><link rel="stylesheet" href="/xdc-subnet-docs/develop/assets/css/styles.05267648.css">
<link rel="preload" href="/xdc-subnet-docs/develop/assets/js/runtime~main.117d1548.js" as="script">
<link rel="preload" href="/xdc-subnet-docs/develop/assets/js/main.709ffb88.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/xdc-subnet-docs/develop/"><div class="navbar__logo"><img src="/xdc-subnet-docs/develop/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/xdc-subnet-docs/develop/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">XDC subnet documentation</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/xdc-subnet-docs/develop/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/XinFinOrg/XDC-Subnet" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xdc-subnet-docs/develop/">Welcome</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/xdc-subnet-docs/develop/category/introduction">Introduction</a><button aria-label="Toggle the collapsible sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/xdc-subnet-docs/develop/category/components">Components</a><button aria-label="Toggle the collapsible sidebar category &#x27;Components&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/xdc-subnet-docs/develop/category/subnet-chain">Subnet Chain</a><button aria-label="Toggle the collapsible sidebar category &#x27;Subnet Chain&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/xdc-subnet-docs/develop/category/checkpoint-smart-contract">Checkpoint Smart Contract</a><button aria-label="Toggle the collapsible sidebar category &#x27;Checkpoint Smart Contract&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/xdc-subnet-docs/develop/components/checkpoint_smart_contract/design">Design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/xdc-subnet-docs/develop/components/checkpoint_smart_contract/spec">Specs</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/xdc-subnet-docs/develop/category/relayer">Relayer</a><button aria-label="Toggle the collapsible sidebar category &#x27;Relayer&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/xdc-subnet-docs/develop/category/api-library">API Library</a><button aria-label="Toggle the collapsible sidebar category &#x27;API Library&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/xdc-subnet-docs/develop/category/xdczero">XDCZero</a><button aria-label="Toggle the collapsible sidebar category &#x27;XDCZero&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/xdc-subnet-docs/develop/category/subswap">Subswap</a><button aria-label="Toggle the collapsible sidebar category &#x27;Subswap&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/xdc-subnet-docs/develop/category/deployment-guide">Deployment Guide</a><button aria-label="Toggle the collapsible sidebar category &#x27;Deployment Guide&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/xdc-subnet-docs/develop/category/using-the-subnet">Using the Subnet</a><button aria-label="Toggle the collapsible sidebar category &#x27;Using the Subnet&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xdc-subnet-docs/develop/contact">Contact</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/xdc-subnet-docs/develop/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/xdc-subnet-docs/develop/category/components"><span itemprop="name">Components</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/xdc-subnet-docs/develop/category/checkpoint-smart-contract"><span itemprop="name">Checkpoint Smart Contract</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Design</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Design</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2><p>The primary function of the parent chain smart contract is to receive block data from the subnet node, verify it, and store it. </p><p><strong>Noteworthy aspects:</strong></p><ul><li><p>Every block data received will be verified to ensure the signature is signed by validators and has passed with 2/3 of the votes.</p></li><li><p>In the gap block occurring in the middle of each epoch, a <code>next</code> may appear, which will be selected for temporary storage.</p></li><li><p>In each epoch block, a <code>current</code> may appear, which will choose the <code>next</code> selected during the gap as validators from the current block to the next epoch.</p></li><li><p>Only three consecutive blocks of <code>roundNumber</code> can confirm the previous block, and <code>mainnetNum</code> will change from -1 to <code>block.number</code> once the block is committed.</p></li></ul><p><img loading="lazy" alt="Overview" src="/xdc-subnet-docs/develop/assets/images/sc-overview-51bb08c762cab3e54f221fc92569c874.jpg" width="1366" height="800" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="specifics">Specifics<a href="#specifics" class="hash-link" aria-label="Direct link to Specifics" title="Direct link to Specifics">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="checkpoint">Checkpoint<a href="#checkpoint" class="hash-link" aria-label="Direct link to Checkpoint" title="Direct link to Checkpoint">​</a></h3><p>The Checkpoint contract implements a blockchain checkpoint system, which verifies and stores block header information for subnetworks. Here are some key functions and features:</p><ul><li><p>The contract defines several data structures, such as <code>Header</code>, <code>HeaderInfo</code>, <code>Validators</code> and <code>BlockLite</code>. These structures are used to store block header information, validator information, and more.</p></li><li><p>The contract employs several mappings and other variables to track the current block header tree, committed blocks, validator set, latest block, and so forth.</p></li><li><p>The contract&#x27;s constructor receives the initial validator set, the genesis block header, the first block header, etc., as parameters and initializes the contract state based on these.</p></li><li><p>The <code>receiveHeader</code> function allows users to submit new block headers. This function will verify the meta information of the block header (like block number, parent block hash, etc.), the signature certificate, and update the block&#x27;s submission status when specific conditions are met.</p></li><li><p>Functions such as <code>setLookup</code>, <code>setCommittedStatus</code>, <code>checkUniqueness</code>, and <code>checkCommittedStatus</code> are used to update or check the contract&#x27;s internal status.</p></li><li><p>Functions like <code>getHeader</code>, <code>getHeaderByNumber</code>, <code>getLatestBlocks</code> and <code>getCurrentValidators</code> enable users to query block header information, validator sets, etc.</p></li><li><p>The <code>splitSignature</code> and <code>recoverSigner</code> functions are used to recover the signer&#x27;s address from the signature, which is necessary for verifying the block header signature.</p></li></ul><p><strong>Logic Flow:</strong></p><ol><li><p>Checkpoint uses the following parameters for contract construction:</p><ul><li><code>address[]  initial_validator_set </code>: List of initial validator addresses</li><li><code>bytes genesis_header</code>: block0HexRLP</li><li><code>bytes block1_header</code>: block1HexRLP</li><li><code>uint64 gap</code>: GAP block number on public chain</li><li><code>uint64 epoch</code>: EPOCH block number on public chain</li></ul></li><li><p>Relayers need to fetch every block data from the subnet node.</p></li><li><p>Users can retrieve the information of each block using methods such as <code>getHeader</code>.</p></li></ol><p><img loading="lazy" alt="Checkpoint" src="/xdc-subnet-docs/develop/assets/images/sc-checkpoint-36d3f42583ecf743412f5f6b1b1cc943.jpg" width="2238" height="924" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lite-checkpoint">Lite Checkpoint<a href="#lite-checkpoint" class="hash-link" aria-label="Direct link to Lite Checkpoint" title="Direct link to Lite Checkpoint">​</a></h3><p>Lite Checkpoint is a lightweight block header checkpoint. It implements several functions, including:</p><ul><li>Setting the initial validator set and related parameters during contract initialization.</li><li>Checking whether the submitted block header meets the requirements.</li><li>Receiving and processing submitted block headers.</li><li>Submitting the block header and block header by block number.</li><li>Retrieving uncommitted block header information.</li><li>Accessing specific block header information.</li><li>Fetching the current and next round of epoch blocks according to the index.</li><li>Getting the latest block information.</li><li>Accessing the current set of validators.</li></ul><p><strong>Logic Flow:</strong></p><ol><li><p>Lite Checkpoint uses the following parameters for contract construction:</p><ul><li><code>address[]  initialValidatorSet </code>: List of initial validator addresses</li><li><code>bytes block1</code>: block1HexRLP</li><li><code>uint64 gap</code>: GAP block number on public chain</li><li><code>uint64 epoch</code>: EPOCH block number on public chain</li></ul></li><li><p>Relayers only need to fetch gap/epoch block data and fetch the following consecutive <code>roundNumber</code> blocks to confirm the signed gap/epoch block from the subnet node.</p></li><li><p>Users can get gap/epoch block information from methods such as <code>getHeader</code>.</p></li></ol><p><img loading="lazy" alt="Lite Checkpoint" src="/xdc-subnet-docs/develop/assets/images/sc-litecheckpoint-cbb2a69680785f10c23607a35edf201d.jpg" width="2204" height="932" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgradeable-module">Upgradeable module<a href="#upgradeable-module" class="hash-link" aria-label="Direct link to Upgradeable module" title="Direct link to Upgradeable module">​</a></h3><p>The Upgradeable module mainly revolves around the concept of transparent proxies and the ability to upgrade the underlying logic contracts without changing the contract&#x27;s address.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="proxygateway-smart-contract">ProxyGateway Smart Contract<a href="#proxygateway-smart-contract" class="hash-link" aria-label="Direct link to ProxyGateway Smart Contract" title="Direct link to ProxyGateway Smart Contract">​</a></h4><p>The <code>ProxyGateway</code> smart contract plays a central role in this module. It inherits from <code>ProxyAdmin</code> and primarily serves the purpose of creating and managing transparent upgradeable proxies (<code>TransparentUpgradeableProxy</code>).</p><p><strong>Key Components and Functionalities</strong>:</p><ul><li><p><strong>cscProxies</strong>: </p><ul><li>A mapping used to store two types of transparent upgradeable proxies.<ul><li><code>0</code> represents &quot;full&quot;</li><li><code>1</code> represents &quot;lite&quot;</li></ul></li></ul></li><li><p><strong>CreateProxy Event</strong>: </p><ul><li>Emitted whenever a new transparent upgradeable proxy is created.</li></ul></li><li><p><strong>createProxy Function</strong>: </p><ul><li>Creates a new <code>TransparentUpgradeableProxy</code>.</li><li>Emits the <code>CreateProxy</code> event upon creation.</li></ul></li><li><p><strong>createFullProxy Function</strong>: </p><ul><li>Specifically designed for creating a transparent upgradeable proxy of type &quot;full&quot;.</li><li>Checks if a &quot;full&quot; type proxy already exists.</li><li>Ensures the provided logic contract has a <code>MODE</code> function that returns &quot;full&quot;.</li></ul></li><li><p><strong>createLiteProxy Function</strong>: </p><ul><li>Designed for creating proxies of type &quot;lite&quot;.</li><li>Checks if a &quot;lite&quot; type proxy already exists.</li><li>Ensures the provided logic contract has a <code>MODE</code> function that returns &quot;lite&quot;.</li></ul></li></ul><p><img loading="lazy" alt="Alt text" src="/xdc-subnet-docs/develop/assets/images/sc-upgradeable-overview-14253c682a52f16297aea204d11e31b6.png" width="1822" height="1000" class="img_ev3q"></p><p><strong>Logic Flow:</strong></p><ol><li><p><strong>Initialization</strong>:</p><p>The process begins with the <code>ProxyGateway</code> contract, which serves as a central hub for creating transparent upgradeable proxies. The contract owner has the capability to create either &quot;full&quot; or &quot;lite&quot; proxies.</p></li><li><p><strong>Proxy Creation</strong>:</p><ul><li>The owner calls either the <code>createFullProxy</code> or <code>createLiteProxy</code> function based on the desired type of proxy.</li><li>The specified logic contract&#x27;s <code>MODE</code> is checked to ensure it matches the desired proxy type.</li><li>A new <code>TransparentUpgradeableProxy</code> is created with the specified logic contract, the <code>ProxyGateway</code> as the admin, and any necessary initialization data.</li><li>The new proxy&#x27;s address is stored in the <code>cscProxies</code> mapping under its corresponding type.</li><li>The <code>CreateProxy</code> event is emitted to log the creation of the new proxy.</li></ul></li><li><p><strong>Upgrading the Proxy</strong>:</p><p>When there&#x27;s a need to upgrade the underlying logic of the proxy (for instance, to introduce new features or fix bugs):</p><ul><li>A new logic contract version is deployed to the network.</li><li>The owner (or authorized entity) of the <code>ProxyGateway</code> contract calls the inherited <code>upgrade</code> function from <code>ProxyAdmin</code> to point the proxy to the new logic contract.</li><li>The proxy now delegates all calls to the new logic contract, while still retaining all its previous storage and state.</li><li>This enables the system to evolve and implement new functionalities without migrating to a new contract address or affecting the contract&#x27;s stored data.</li></ul></li><li><p><strong>Interacting with the Proxy</strong>:</p><p>Users and other contracts can interact with the proxy just as they would with a regular contract. However, behind the scenes, all function calls and data accesses are delegated to the current logic contract that the proxy points to.</p></li><li><p><strong>Querying and Data Access</strong>:</p><p>Users and contracts can still query data, access functions, or invoke transactions on the proxy&#x27;s address. The proxy transparently delegates these to the underlying logic contract, ensuring continuity of operations.</p></li><li><p><strong>Advanced Management</strong>:</p><p>Through the <code>ProxyAdmin</code> functionality, the owner can further manage the proxy, such as changing the admin or even downgrading to a previous version of the logic contract if needed.</p></li></ol><p><img loading="lazy" alt="Alt text" src="/xdc-subnet-docs/develop/assets/images/sc-upgradeable-upgrade-6cacdcde125ee9862d2c34f915882cf6.png" width="2012" height="1180" class="img_ev3q"></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/xdc-subnet-docs/develop/category/checkpoint-smart-contract"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Checkpoint Smart Contract</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/xdc-subnet-docs/develop/components/checkpoint_smart_contract/spec"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Specs</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#specifics" class="table-of-contents__link toc-highlight">Specifics</a><ul><li><a href="#checkpoint" class="table-of-contents__link toc-highlight">Checkpoint</a></li><li><a href="#lite-checkpoint" class="table-of-contents__link toc-highlight">Lite Checkpoint</a></li><li><a href="#upgradeable-module" class="table-of-contents__link toc-highlight">Upgradeable module</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/xdc-subnet-docs/develop/">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.xdc.dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dev<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/xdc_community" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/XinFinOrg/XDC-Subnet" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Xinfin XDC Subnet. Built with Docusaurus.</div></div></div></footer></div>
<script src="/xdc-subnet-docs/develop/assets/js/runtime~main.117d1548.js"></script>
<script src="/xdc-subnet-docs/develop/assets/js/main.709ffb88.js"></script>
</body>
</html>